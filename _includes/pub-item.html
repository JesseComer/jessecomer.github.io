<!-- _includes/pub-item.html -->
<li class="pub-item">
  {% assign p = include.post %}

  <!-- Line 1: bold, non-clickable title + links -->
  <div class="pub-top">
    <strong class="pub-title">{{ p.title }}</strong>
    <span class="pub-links">
      {% if p.pdf %} [<a href="{{ p.pdf }}">PDF</a>]{% endif %}

      {% if p.arxiv %}
        {% assign arxiv_url = p.arxiv %}
        {% unless arxiv_url contains '://' %}
          {% assign arxiv_url = 'https://arxiv.org/abs/' | append: arxiv_url %}
        {% endunless %}
        [<a href="{{ arxiv_url }}">arXiv</a>]
      {% endif %}

      {%- comment -%} Prefer jdoi; else cdoi; else no DOI {%- endcomment -%}
      {% assign doi_url = nil %}
      {% if p.jdoi %}
        {% assign doi_url = p.jdoi %}
      {% elsif p.cdoi %}
        {% assign doi_url = p.cdoi %}
      {% endif %}
      {% if doi_url %}
        {% unless doi_url contains '://' %}
          {% assign doi_url = 'https://doi.org/' | append: doi_url %}
        {% endunless %}
        [<a href="{{ doi_url }}">DOI</a>]
      {% endif %}

      {%- comment -%} Slides: accept absolute, www.*, or relative paths {%- endcomment -%}
      {% if p.slides %}
        {% assign slides_raw = p.slides %}
        {% assign slides_url = slides_raw %}
        {% if slides_raw contains '://' %}
          {% comment %} absolute URL; leave as-is {% endcomment %}
        {% elsif slides_raw contains 'www.' %}
          {% assign slides_url = 'https://' | append: slides_raw %}
        {% else %}
          {% assign firstchar = slides_raw | slice: 0, 1 %}
          {% if firstchar == '/' %}
            {% assign slides_url = slides_raw | relative_url %}
          {% else %}
            {% capture slides_path %}/{{ slides_raw }}{% endcapture %}
            {% assign slides_url = slides_path | relative_url %}
          {% endif %}
        {% endif %}
        [<a href="{{ slides_url }}">Slides</a>]
      {% endif %}
    </span>
  </div>

  <!-- Line 2: authors, venue (year included in venue if desired) -->
  <div class="pub-meta">
    {% if p.authors %}
      <span class="pub-authors">{{ p.authors }}</span>.
    {% endif %}
    {% if p.venue %}
      <span class="pub-venue"><em> {{ p.venue }}</em></span>.
    {% endif %}
  </div>
</li>
